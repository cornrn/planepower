include_rules

# If you want to buld the bbone code from tup, add CONFIG_BBONE= to your tup.config
ifdef BBONE

CC=clang
CPPFLAGS += -Iinclude -Wall -Werror -Wextra
CPPFLAGS += -I..
CPPFLAGS += -I../shared
CFLAGS += -ggdb -pthread -DDEBUG=1 -D _BSD_SOURCE 
CFLAGS += -std=gnu99

: foreach *.c |> !cc |>

#: main_arm.o SimpleGPIO.o udp_communication.o spi_communication.o log.o data_decoding.o circular_buffer.o |> !ld |> main_arm

#: main_beaglebone.o udp_communication.o uart_communication.o log.o circular_buffer.o data_decoding.o |> !ld |> main_beaglebone

:test_spi.o bitbang_spi.o  SimpleGPIO.o |> !ld |> test_spi
:spi_status.o SimpleGPIO.o |> !ld |> spi_status
:bitbanging.o SimpleGPIO.o |> !ld |> bitbanging

#BB-SPI1-01-00A0.dtbo:BB-SPI1-01-00A0.dts
	#dtc -o $@ -b o -@ $^

#BB-Bitbanging-00A0.dtbo:BB-Bitbanging-00A0.dts
	#dtc -o $@ -b o -@ $^
	#cp $@ ~

endif


