include_rules

ifdef BBONE

CC=clang
CPPFLAGS += -Iinclude -Wall -Werror
CPPFLAGS += -I..
CPPFLAGS += -I../shared
CFLAGS += -ggdb -pthread -D _BSD_SOURCE 
CFLAGS += -DDEBUG=1 -DANALYZE=0 
LDFLAGS += -lpthread

: foreach *.c |> !cc |>

:read_log.o ../shared/udp_communication.o data_decoding.o |> !ld |> read_log

:main_server.o ../shared/log.o ../shared/udp_communication.o ../shared/uart_communication.o data_decoding.o analyze.o |> !ld |> main_server 

## Also circular_buffer.o?
#:main_windsensor.o udp_communication.o uart_communication.o log.o data_decoding.o |> !ld |> main_wind

endif
